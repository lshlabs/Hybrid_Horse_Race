# 능력치 시스템 마이그레이션 계획

현재 복잡한 시스템을 `horse_sim_stats_design_85.md` 기반의 단순한 시스템으로 전환하기 위한 계획입니다.

---

## 현재 시스템 vs 새 시스템 비교

### 현재 시스템 (복잡)

**능력치:**
- 최고속도: 공통 60 km/h + 여러 보정
- 지구력: 100 기본, 회복 모드, 복잡한 소모 패턴
- 컨디션: 0~100, 구간별 보정 (5단계)
- 주행 습성: 4가지 (도주마, 선행마, 선입마, 추입마)
  - 각 습성마다 구간별 속도/지구력/컨디션 보정
- 기수 능력: 50 기본, 여러 보정 (회복, 소모 효율, 컨디션)
- 증강 시스템: 4종류 × 3단계 레어도 = 복잡한 선택

**계산 복잡도:**
- 최고속도 계산: 기본 → 지구력 → 컨디션 → 주행습성 → 증강 (5단계)
- 지구력 소모: 구간별 × 주행습성 × 기수능력 × 컨디션
- 가속/감속: 주행습성별 가속률 테이블

---

### 새 시스템 (단순)

**능력치:**
- 7개 스탯 (각 1~20, 총합 85)
  - **Speed**: 최고속도 (55~70 km/h)
  - **Stamina**: 지구력 (최대값 결정)
  - **Power**: 가속/추월력
  - **Guts**: 막판 근성
  - **Brain**: 페이스 조절/효율/안정성
  - **Start**: 출발 능력
  - **Consistency**: 컨디션 기복 (운빨)

**RunStyle:**
- 별도 선택 (도주/선행/선입/추입)
- 단순 함수 `f_runstyle(progress)`로 구간별 속도 비율만 제공

**증강 시스템:**
- 없음 (또는 선택적으로 유지 가능)

---

## 주요 차이점

| 항목 | 현재 시스템 | 새 시스템 |
|------|------------|----------|
| **공정성** | 증강 선택으로 차별화 | 스탯 총합 85로 완전 공정 |
| **복잡도** | 높음 (여러 보정, 증강) | 낮음 (7개 스탯만) |
| **가속/감속** | 주행습성별 테이블 | Power 스탯으로 단순화 |
| **운빨 요소** | 증강 선택, 컨디션 기복 | Consistency + Start + Brain |
| **확장성** | 증강 시스템으로 확장 | RunStyle로 확장 가능 |

---

## 마이그레이션 단계

### Phase 1: 설계 확인 및 조정

1. ✅ `horse_sim_stats_design_85.md` 검토 완료
2. ⏳ RunStyle과의 통합 방법 결정
   - 새 시스템의 `f_runstyle(progress)` 함수 정의 필요
   - 현재 4가지 주행습성 유지할지 결정
3. ⏳ 증강 시스템 처리 방법 결정
   - 완전 제거 vs 단순화 유지

### Phase 2: 문서 업데이트

1. ⏳ `ability-stats-summary.md` → 새 시스템으로 교체
   - 또는 `ability-stats-summary-v2.md`로 새로 작성
2. ⏳ 기존 문서들 정리
   - `ability-and-augment-design.md` 보관 또는 삭제
   - `speed-extreme-simulation.md` 등 구버전 문서 정리

### Phase 3: 코드 마이그레이션

1. ⏳ `frontend/src/lib/race-sim.ts` 재작성
   - 새 스탯 시스템 기반으로 완전히 다시 작성
2. ⏳ 시뮬레이터 테스트 및 밸런싱
   - 새 시스템으로 밸런스 테스트
   - 필요시 수치 조정

### Phase 4: UI/UX 업데이트

1. ⏳ 말 스탯 표시 UI 변경
   - 7개 스탯 (1~20) 표시
   - 총합 85 표시
2. ⏳ 증강 선택 UI 제거 (또는 단순화)

---

## 결정 필요 사항

### 1. RunStyle 처리 방법

**옵션 A: 현재 4가지 유지**
- 도주마, 선행마, 선입마, 추입마
- `f_runstyle(progress)` 함수로 구간별 속도 비율 제공
- 예: `f_paceSetter(progress) = 초반 1.1, 중반 1.05, 후반 0.95`

**옵션 B: 단순화**
- RunStyle 없이 스탯만으로 차별화
- Power, Guts, Brain 등으로 주행 스타일 표현

### 2. 증강 시스템 처리

**옵션 A: 완전 제거**
- 증강 선택 단계 제거
- 스탯만으로 모든 차별화

**옵션 B: 단순화 유지**
- 세트별로 증강 선택 (선택적)
- 단순한 보너스만 제공 (예: Speed +2, Stamina +10)

### 3. 컨디션(Condition) 처리

**현재 시스템:**
- 별도 컨디션 값 (0~100)
- 구간별 보정 적용

**새 시스템:**
- Consistency 스탯으로 운빨 요소만 처리
- 별도 컨디션 값 없음

**결정:**
- Consistency만으로 충분한지 확인 필요

---

## 예상 작업량

- **설계 문서 업데이트**: 2~3시간
- **코드 마이그레이션**: 4~6시간
- **밸런싱 테스트**: 2~4시간
- **UI 업데이트**: 2~3시간

**총 예상 시간**: 10~16시간

---

## 다음 단계

1. 사용자와 함께 위의 "결정 필요 사항" 논의
2. 최종 설계 확정
3. 단계별 마이그레이션 진행

