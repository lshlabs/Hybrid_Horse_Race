<!-- plan:hybrid-horse-race-unity -->
# Hybrid Horse Race - Unity 프로젝트 계획

## 1. 프로젝트 개요
- **목표**: 증강(Augment) 시스템이 결합된 하이브리드 경마 게임을 Unity(C#)로 구현하고, 2인 팀 협업 프로세스를 확립한다.
- **플랫폼**: PC(Windows/Mac) 우선, 추후 모바일 전환 검토.
- **장르/특징**: 전략 시뮬레이션, 라운드 기반 레이스, 증강 선택에 따른 빌드업.

## 2. 기술 스택 & 협업 도구
- **엔진**: Unity 2022 LTS 이상
- **언어**: C#
- **주요 패키지**: Cinemachine, Timeline, TextMeshPro, Addressables, Unity Test Framework
- **버전 관리**: Git + Git LFS (대용량 에셋), GitHub 또는 GitLab
- **커뮤니케이션**: Discord(실시간), Notion/Confluence(문서), Jira/Trello(이슈), Figma(UI 설계)

## 3. 핵심 기능 범위
1. **경마 시뮬레이션 코어**
   - 트랙 기반 이동/AI, 속도·스태미나 곡선, 구간 판정
   - 상태 머신(대기/출발/질주/종료)과 디버그 HUD
2. **증강 시스템**
   - 세트 시작 전 3개 증강 랜덤 제시 + 새로고침 제한
   - ScriptableObject 기반 효과 정의(스택, 지속 시간, 조건)
3. **게임 플로우 & UI**
   - 로비 → 말 선택 → 증강 선택 → 레이스 → 결과/리더보드
   - HUD, 로그, 리더보드, 카메라 연출(Timeline) 및 사운드 통합
4. **데이터 & 세이브**
   - ScriptableObject/JSON으로 말·증강·트랙 데이터 관리
   - 로컬 저장/불러오기, 플레이 기록/통계 로그
5. **테스트 & 빌드**
   - PlayMode/EditMode 테스트 케이스 작성
   - PC 빌드 스크립트, Unity Cloud Build 후보 검토

## 4. 역할 분장 (2인 팀)

| 역할 | 담당자 | 책임 범위 | 대표 산출물 |
|------|--------|-----------|-------------|
| **Gameplay & Systems Engineer** | 팀원 A | 경마 코어 로직, 증강 시스템, 데이터 구조, 기술 아키텍처, 테스트 자동화 | `Assets/Scripts/Core`, `Assets/Scripts/Systems`, 테스트 코드, 기술 문서 |
| **Presentation & UX Engineer** | 팀원 B | UI 플로우, 씬 구성, 카메라/Timeline 연출, 사운드·FX, 빌드 파이프라인, QA 지원 | `Assets/Scenes`, `Assets/Scripts/UI`, `Assets/Art`, 빌드 스크립트, UX 문서 |

- **공동 작업**: 브랜치 전략 수립, 코드 리뷰, 데이터 테이블 설계, 플레이테스트/밸런싱, 일정 관리, 문서 업데이트.

## 5. 일정 계획 (예시 4주 스프린트)

| 기간(2025) | 목표 | 세부 작업 |
|------------|------|-----------|
| 11/10 ~ 11/16 (1주차) | 프리프로덕션 | GDD 정리, Unity 프로젝트 템플릿 생성, 협업 규칙·브랜치 전략 확정, 레퍼런스 및 UI 와이어프레임 |
| 11/17 ~ 11/23 (2주차) | 시스템 프로토타입 | 경마 코어 1차 구현, 증강 데이터 구조 설계, UI 목업 프로토타입, 씬 구조 초안 |
| 11/24 ~ 11/30 (3주차) | 컨텐츠 통합 | 증강 적용 로직 + UI 연동, 결과 화면/리더보드, 사운드·카메라 연출, 저장/불러오기 |
| 12/01 ~ 12/07 (4주차) | 폴리싱 & QA | 밸런스 튜닝, 버그 수정, QA 체크리스트 실행, 빌드 파이프라인 스크립트, 플레이테스트 리포트 |

> 매주 금요일: 스프린트 리뷰 & 다음 주 계획 / 일요일: 빌드 스모크 테스트

## 6. 세부 To-do 리스트

- [ ] GDD & 기능 명세 초안 작성
- [ ] Unity 프로젝트 초기 셋업 + Git LFS 구성
- [ ] ScriptableObject 기반 데이터 스키마 정의
- [ ] 경마 코어 프로토타입(이동/AI/판정) 제작
- [ ] 증강 시스템(랜덤, 적용, 효과 처리) 구현
- [ ] UI 플로우(설정/레이스/결과) 와이어프레임 & 구현
- [ ] 카메라/Timeline 연출 및 사운드 통합
- [ ] 세이브/로드 및 통계 로깅 기능
- [ ] PlayMode/EditMode 테스트 시나리오 작성
- [ ] 배포용 빌드 스크립트 및 체크리스트 정의

## 7. 협업 규칙
- **브랜치**: `main`(배포), `develop`(통합), 기능별 `feature/*`; PR 머지 시 충돌 방지 위해 rebase 금지.
- **커밋 규칙**: `feat:`, `fix:`, `refactor:`, `chore:`, `docs:` 태그 사용, 제목은 영어·본문은 한국어 허용.
- **코드 리뷰**: 최소 1인 승인, 중요한 변경은 페어 코드 리뷰.
- **자산 관리**: 폴더 규칙 `Assets/Art/<Category>`, 파일명에 버전 명시, LFS 사용 파일 용량 체크.
- **일일 스탠드업**: 10분 이내(어제/오늘/이슈), Discord 스레드에 로그 남기기.
- **문서화**: 설계 변경 시 Notion/GDD 업데이트, PR에 관련 문서 링크 첨부.

## 8. 리스크 & 대응 전략
- **물리/AI 난이도**: 단계적 프로토타입, 디버그 뷰·리플레이 도입.
- **증강 밸런스**: 시뮬레이션/테스트 데이터 기록, 밸런스 테이블 버전 관리.
- **아트 리소스 부족**: 임시 에셋 사용 후 교체 계획, Asset Store/오픈소스 검토.
- **일정 지연**: 핵심 기능 우선순위 재정렬, 데일리 진척 점검, 버퍼 확보.

## 9. 멀티플레이 기능 개요

### 요구사항 정리
- 호스트가 게임 세션을 생성한다.
- 세션은 코드가 포함된 URL로 공유되어 다른 유저가 참가한다.
- 실시간으로 경기 상태가 모든 참가자에게 동기화된다.
- 별도의 로그인/인증 기능은 포함하지 않는다.

### 구현 가능성 및 권장 스택
- Unity 2022 LTS + **Unity Netcode for GameObjects** 또는 **Mirror** 활용 시 구현 가능.
  - 호스트 기반 세션 생성, NetworkVariable, RPC 등 실시간 동기화 기능 지원.
- URL 초대는 난수 기반 세션 코드(UUID 등)를 생성하여 `https://example.com/join?gamecode=XXXXXX` 형태로 공유.
  - URL 클릭/입력 시 해당 코드로 게임 접속하도록 커스텀 로직(Deeplink, 커맨드라인 인자 등) 구현 필요.

### 고려 사항
- 인증이 없으므로 부정 참가/중복 접속을 제어할 별도 로직 필요.
- 네트워크 지연/연결 끊김 대비 재접속 절차, 호스트 이탈 시 처리, 포트 포워딩 등 인프라 대응 검토.

### 기능별 난이도 요약

| 기능                   | 구현 난이도                | 비고 |
|------------------------|---------------------------|------|
| 게임 생성/호스팅        | 낮음 (Netcode/Mirror 기본 기능) | 호스트가 서버 역할 |
| 세션 코드 & URL 생성     | 중간 (직접 구현 필요)        | UUID 등 난수 기반 코드, URL 포맷 |
| URL 초대/참가 처리      | 중간 (직접 구현 필요)        | Deeplink, 커맨드라인 인자 |
| 실시간 상태 동기화      | 낮음 (Netcode/Mirror 활용)     | 위치, 상태, 증강 선택 동기화 |
| 인증/보안               | 제외                        | 간단하지만 보안 취약 |

## 10. 산출물 체크리스트
- Unity 프로젝트(`Assets/`, `ProjectSettings/`, `Packages/`) 구조
- GDD & 기술 설계 문서
- 플레이 가능 데모 빌드(.exe/.app)
- QA 리포트 및 밸런스 로그
- 발표 자료(게임플레이 영상, 기능 설명 슬라이드)

