rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // 룸 문서
    match /rooms/{roomId} {
      // 읽기: 모든 사용자가 읽을 수 있음 (실시간 동기화를 위해)
      // 쓰기: Cloud Functions만 가능 (보안을 위해)
      allow read: if true;
      allow write: if false; // 모든 쓰기는 Cloud Functions를 통해 수행

      // 플레이어 서브컬렉션
      match /players/{playerId} {
        // 읽기: 모든 사용자가 읽을 수 있음 (플레이어 리스트 표시)
        // 쓰기: Cloud Functions만 가능
        allow read: if true;
        allow write: if false;
      }

      // 세트 서브컬렉션
      match /sets/{setId} {
        // 읽기: 모든 사용자가 읽을 수 있음 (게임 진행 상황)
        // 쓰기: Cloud Functions만 가능
        allow read: if true;
        allow write: if false;
      }

      // 로그 서브컬렉션 (선택사항)
      match /logs/{logId} {
        // 읽기: 모든 사용자가 읽을 수 있음 (디버깅용)
        // 쓰기: Cloud Functions만 가능
        allow read: if true;
        allow write: if false;
      }
    }
  }
}

